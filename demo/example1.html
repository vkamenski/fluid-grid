<!doctype html>
<html>
<head>
  <title>Demo</title>

  <script src="../vendor/require.js"></script>
  <style type="text/css">
    
	
	.grid-item {
		margin: 10px;
		padding: 10px;
	}
	.grid-item img {
		width: 100%;
		display: block;
		opacity: 1;
		filter: alpha(opacity = 100);
	}
	.grid-itemloading img {
		opacity: 0;
		filter: alpha(opacity = 0);
	}
  </style>
</head>
<body>
	<div class="grid">
	
		<div class="grid-item loading" 
			data-grid-width="612" 
			data-grid-height="612">
			<img data-src="images/1.jpg" src="data:image/gif,"/>
		</div>
	
		<div class="grid-item loading"
			data-grid-width="1024" 
			data-grid-height="681">
			<img data-src="images/2.jpg" src="data:image/gif,"/>
		</div>
		<div class="grid-item loading"
			data-grid-width="428" 
			data-grid-height="684">
			<img data-src="images/3.jpg" src="data:image/gif,"/>
		</div>
		<div class="grid-item loading"
			data-grid-width="940" 
			data-grid-height="660">
			<img data-src="images/4.jpg" src="data:image/gif,"/>
		</div>
		<div class="grid-item loading"
			data-grid-width="428" 
			data-grid-height="684">
			<img data-src="images/5.jpg" src="data:image/gif,"/>
		</div>
		<div class="grid-item loading"
			data-grid-width="987" 
			data-grid-height="684">
			<img data-src="images/6.jpg" src="data:image/gif,"/>
		</div>
		<div class="grid-item loading"
			data-grid-width="940" 
			data-grid-height="668">
			<img data-src="images/7.jpg" src="data:image/gif,"/>
		</div>
		<div class="grid-item loading"
			data-grid-width="612" 
			data-grid-height="612">
			<img data-src="images/8.jpg" src="data:image/gif,"/>
		</div>
		<div class="grid-item loading" 
			data-grid-width="940" 
			data-grid-height="656">
			<img data-src="images/9.jpg" src="data:image/gif,"/>
		</div>
		<div class="grid-item loading"
			data-grid-width="1024" 
			data-grid-height="666">
			<img data-src="images/10.jpg" src="data:image/gif,"/>
		</div>
		<div class="grid-item loading"
			data-grid-width="457" 
			data-grid-height="684">
			<img data-src="images/11.jpg" src="data:image/gif,"/>
		</div>
		<div class="grid-item loading"
			data-grid-width="710" 
			data-grid-height="300">
			<img data-src="images/12.jpg" src="data:image/gif,"/>
		</div>
		<div class="grid-item loading" 
			data-grid-width="612" 
			data-grid-height="612">
			<img data-src="images/13.jpg" src="data:image/gif,"/>
		</div>
		<div class="grid-item loading"
			data-grid-width="612" 
			data-grid-height="612">
			<img data-src="images/14.jpg" src="data:image/gif,"/>
		</div>
		<div class="grid-item loading"
			data-grid-width="940" 
			data-grid-height="557">
			<img data-src="images/15.jpg" src="data:image/gif,"/>
		</div>
		<div class="grid-item loading"
			data-grid-width="612" 
			data-grid-height="612">
			<img data-src="images/16.jpg" src="data:image/gif,"/>
		</div>
		<div class="grid-item loading"
			data-grid-width="681" 
			data-grid-height="684">
			<img data-src="images/17.jpg" src="data:image/gif,"/>
		</div>
		<div class="grid-item loading"
			data-grid-width="940" 
			data-grid-height="627">
			<img data-src="images/18.jpg" src="data:image/gif,"/>
		</div>
		<div class="grid-item loading"
			data-grid-width="612" 
			data-grid-height="612">
			<img data-src="images/19.jpg" src="data:image/gif,"/>
		</div>
		<div class="grid-item loading"
			data-grid-width="940" 
			data-grid-height="605">
			<img data-src="images/20.jpg" src="data:image/gif,"/>
		</div>
		<div class="grid-item loading"
			data-grid-width="940" 
			data-grid-height="668">
			<img data-src="images/21.jpg" src="data:image/gif,"/>
		</div>
		<div class="grid-item loading"
			data-grid-width="612" 
			data-grid-height="612">
			<img data-src="images/22.jpg" src="data:image/gif,"/>
		</div>
		<div class="grid-item loading"
			data-grid-width="940" 
			data-grid-height="673">
			<img data-src="images/23.jpg" src="data:image/gif,"/>
		</div>
		<div class="grid-item loading"
			data-grid-width="684" 
			data-grid-height="684">
			<img data-src="images/24.jpg" src="data:image/gif,"/>
		</div>
		<div class="grid-item loading"
			data-grid-width="1024" 
			data-grid-height="584">
			<img data-src="images/25.jpg" src="data:image/gif,"/>
		</div>
	</div>
	
	<script>
		requirejs.config({
			baseUrl: '../' + (document.location.hash == '#dist'? 'dist': 'src'),
			paths: {
				'backbone': '../vendor/backbone-min',
				'underscore': '../vendor/underscore-min',
				'jquery': '../vendor/jquery-1.9.0.min',
				'loading-queue': '../vendor/jquery.loading-queue.min'
			},
			shim: {
				'loading-queue': {
					deps: ['jquery'],
			    	exports: '$'
				},
				
				'backbone': {
					deps: ['jquery', 'underscore'],
			    	exports: 'Backbone'
				}
			}
		});
		
		require(['grid', 'loading-queue'],function(FluidGallery){
			
			(new FluidGallery({
				el: $(".grid")
			}))
			.render();	
			
			$('img').each(function() {
				$(this).loadingQueue().then(function(img) {
					$(img).parent('.grid-item').removeClass('loading');
				});				
			});
			
		});	
	</script>
</body>
</html>