(function(t,i){var e,n,i,o=t.define;(function(t){function o(t,i){return w.call(t,i)}function r(t,i){var e,n,o,r,s,u,l,h,f,c,p=i&&i.split("/"),a=$.map,d=a&&a["*"]||{};if(t&&"."===t.charAt(0))if(i){for(p=p.slice(0,p.length-1),t=p.concat(t.split("/")),h=0;t.length>h;h+=1)if(c=t[h],"."===c)t.splice(h,1),h-=1;else if(".."===c){if(1===h&&(".."===t[2]||".."===t[0]))break;h>0&&(t.splice(h-1,2),h-=2)}t=t.join("/")}else 0===t.indexOf("./")&&(t=t.substring(2));if((p||d)&&a){for(e=t.split("/"),h=e.length;h>0;h-=1){if(n=e.slice(0,h).join("/"),p)for(f=p.length;f>0;f-=1)if(o=a[p.slice(0,f).join("/")],o&&(o=o[n])){r=o,s=h;break}if(r)break;!u&&d&&d[n]&&(u=d[n],l=h)}!r&&u&&(r=u,s=l),r&&(e.splice(0,s,r),t=e.join("/"))}return t}function s(i,e){return function(){return a.apply(t,C.call(arguments,0).concat([i,e]))}}function u(t){return function(i){return r(i,t)}}function l(t){return function(i){g[t]=i}}function h(i){if(o(v,i)){var e=v[i];delete v[i],x[i]=!0,p.apply(t,e)}if(!o(g,i)&&!o(x,i))throw Error("No "+i);return g[i]}function f(t){var i,e=t?t.indexOf("!"):-1;return e>-1&&(i=t.substring(0,e),t=t.substring(e+1,t.length)),[i,t]}function c(t){return function(){return $&&$.config&&$.config[t]||{}}}var p,a,d,m,g={},v={},$={},x={},w=Object.prototype.hasOwnProperty,C=[].slice;d=function(t,i){var e,n=f(t),o=n[0];return t=n[1],o&&(o=r(o,i),e=h(o)),o?t=e&&e.normalize?e.normalize(t,u(i)):r(t,i):(t=r(t,i),n=f(t),o=n[0],t=n[1],o&&(e=h(o))),{f:o?o+"!"+t:t,n:t,pr:o,p:e}},m={require:function(t){return s(t)},exports:function(t){var i=g[t];return i!==void 0?i:g[t]={}},module:function(t){return{id:t,uri:"",exports:g[t],config:c(t)}}},p=function(i,e,n,r){var u,f,c,p,a,$,w=[];if(r=r||i,"function"==typeof n){for(e=!e.length&&n.length?["require","exports","module"]:e,a=0;e.length>a;a+=1)if(p=d(e[a],r),f=p.f,"require"===f)w[a]=m.require(i);else if("exports"===f)w[a]=m.exports(i),$=!0;else if("module"===f)u=w[a]=m.module(i);else if(o(g,f)||o(v,f)||o(x,f))w[a]=h(f);else{if(!p.p)throw Error(i+" missing "+f);p.p.load(p.n,s(r,!0),l(f),{}),w[a]=g[f]}c=n.apply(g[i],w),i&&(u&&u.exports!==t&&u.exports!==g[i]?g[i]=u.exports:c===t&&$||(g[i]=c))}else i&&(g[i]=n)},e=n=a=function(i,e,n,o,r){return"string"==typeof i?m[i]?m[i](e):h(d(i,e).f):(i.splice||($=i,e.splice?(i=e,e=n,n=null):i=t),e=e||function(){},"function"==typeof n&&(n=o,o=r),o?p(t,i,e,n):setTimeout(function(){p(t,i,e,n)},15),a)},a.config=function(t){return $=t,a},i=function(t,i,e){i.splice||(e=i,i=[]),o(g,t)||o(v,t)||(v[t]=[t,i,e])},i.amd={jQuery:!0}})(),i("../vendor/almond",function(){}),i("mixins/options",[],function(){return{options:{},setOptions:function(t){return this.options&&(t=$.extend({},this.options,t)),this.options=t,this},parseOptions:function(t,i){var e=this,n=$(t).data()||{},o=RegExp("^"+i+"([a-zA-Z]+)");return $.each(n,function(t,i){n.hasOwnProperty(t)&&o.test(t)&&(shortName=t.match(o)[1].replace(/[A-Z]/,function(t){return(t||"").toLowerCase()}),e.options[shortName]=i)}),this}}}),i("mixins/element",[],function(){return{$el:null,setElement:function(t){return this.$el=$(t),this},render:function(){return this}}}),i("item",["mixins/options","mixins/element"],function(t,i){var e=function(t){this.setOptions(t).setElement(this.options.el).parseOptions(this.$el,"fluidGrid")};return $.extend(e.prototype,t,i,{resize:function(t,i){var e=t.width-this.getOffset();return this.$el.width(Math.ceil(e)),i&&this.$el.height(e*this.getAspectRation()),this},getOffset:function(){var t=this.$el.outerWidth(!0)-this.$el.width();return t},getAspectRation:function(){return this.options.height/this.options.width},position:function(t){return this.$el.css({top:t.top||0,left:t.left||0}),this},render:function(){return this.$el.css("position","absolute"),this}}),e}),i("fluid-grid",["item","mixins/options","mixins/element"],function(t,i,e){var n=function(t){var i=this;this.setOptions(t).setElement(this.options.el).parseOptions(this.$el,"fluidGrid"),this.$el.find(this.options.itemSelector).each(function(t,e){i.addItem(e)}),$(window).resize(function(){i.render()})};return $.extend(n.prototype,i,e,{options:{itemSelector:"> .item",columnMaxWidth:300,columnMinWidth:200,keepAspectRetio:!0},columns:{},items:[],addItem:function(i){var e=new t({el:$(i)});return this.items.push(e),this.$el.append(e.el),this.$el.trigger("item-added.fluid-grid",[e]),this},getColumnsCount:function(){return Math.ceil(this.width/(this.options.columnMaxWidth+this.getItemsOffset()))},getColumnWidth:function(){return this.width/this.getColumnsCount()},getItemsOffset:function(){var t=0;return this.items[0]&&(t=this.items[0].getOffset()),t},findSmallestColumn:function(){var t=null;return $.each(this.columns,function(i,e){(!t||t.height>e.height)&&(t=e)}),t},findHighestColumn:function(){var t=null;return $.each(this.columns,function(i,e){(!t||t.height<e.height)&&(t=e)}),t},createColumns:function(){this.columns={};for(var t=1;this.getColumnsCount()>=t;t++)this.columns[t]={sort:t,height:0}},render:function(){var t=this;this.width=this.$el.width(),this.$el.css({position:"relative",visibility:"visible"}),this.createColumns(),$.each(this.items,function(i,e){var n=t.findSmallestColumn();e.render().resize({width:t.getColumnWidth()},t.options.keepAspectRetio),e.position({top:n.height,left:(n.sort-1)*t.getColumnWidth()}),n.height+=e.$el.outerHeight(!0)});var i=this.findHighestColumn();return i&&this.$el.height(i.height),this}}),n});var r=n("fluid-grid");"undefined"!=typeof module&&module.exports?module.exports=r:o?function(t){t(function(){return r})}(o):t["fluid-grid"]=r})(this);